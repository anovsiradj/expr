<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Canvas. Expr:1</title>
	<style>
	#cnvs {
		background-color: #eee;
	}
	</style>
</head>
<body>

	<canvas id="cnvs" width="900" height="300"></canvas>

	<pre id="log"></pre>

	<script>
	var _e_log = document.getElementById('log');
	var cnvs = document.getElementById('cnvs');
	var ctx = cnvs.getContext('2d');
	var bentuk = {
		ling: {
			pos: {
				x: 100,
				y: 100
			},
			ukur: {
				rad: 20
			}
		},
		pers: {
			pos: {
				x: 0,
				y: 0
			},
			ukur: {
				panj: 50,
				ting: 50
			},
		}
	}

	function buatLing() {
		ctx.beginPath();
		// x,y,radius, mulai sudut, berhenti sudut
		ctx.arc(bentuk.ling.pos.x, bentuk.ling.pos.y, 20, 0, Math.PI*2);
		ctx.fillStyle = randhex();
		ctx.fill();
		ctx.closePath();
	}
	function buatPers() {
		ctx.beginPath();
		ctx.rect(bentuk.pers.pos.x, bentuk.pers.pos.y, bentuk.pers.ukur.panj,bentuk.pers.ukur.ting);
		ctx.fillStyle = randhex();
		ctx.fill();
		ctx.closePath();
	}

	// jadi ini yg namanya "recursion"
	// sebuah fungsi yg memanggil fungsi itu sendiri
	function tutupiCnvs() {
		_log("x: "+bentuk.pers.pos.x+", y:"+bentuk.pers.pos.x);
		bentuk.pers.ukur.panj = 10;
		bentuk.pers.ukur.ting = 10;
		buatPers();
		bentuk.pers.pos.x += bentuk.pers.ukur.panj;
		if (bentuk.pers.pos.x < cnvs.width) {
			setTimeout(tutupiCnvs,10);
		} else {
			bentuk.pers.pos.x = 0;
			if (bentuk.pers.pos.y < cnvs.height && bentuk.pers.pos.x < cnvs.width) {
				bentuk.pers.pos.y += bentuk.pers.ukur.ting;
				setTimeout(tutupiCnvs,10);
			};
		}
	}

	function _log(msg,b) {
		b = b || false;
		if (b) {
			_e_log.innerHTML += msg+"\n";
		} else {
			_e_log.innerHTML = msg;
		};
	}

	// diluar expr (jadi saya ndak usah nyentuh ini)
	function randhex() { var h = '#'+(Math.random()*0xFFFFFF<<0).toString(16); return h; }
	</script>

</body>
</html>
